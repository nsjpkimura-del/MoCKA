---
event_id: "EVT-2026-000004"
date: "2026-02-26"
event_type: "ARCH_DECISION"
importance: "A"
status: "Active"

title: "Gitツリー算出移行"
summary: "calc_summary_hashをsealing_commitツリー基準へ移行"

related_events: []
attachments: []

hash:
  algorithm: "sha256"
  value: "ff85bbe5b984bf820b7dcf8cf617147ded9bb61dbd59f865ee7ae82f8a74909d"
  git_commit: ""
  ots_proof: ""
---

# Context
WSL由来のアクセス不能パス問題(WinError 1920)を制度的に排除する必要があった。

# Options
- Option1: ファイルシステム走査を継続\n- Option2: Gitのsealing_commitツリーから算出 (adopted)

# Decision
calc_summary_hashはファイルシステム走査を廃止し、sealing_commitのGitツリーから算出する。

# Rationale
検証空間をGitに固定し、環境差とアクセス不能パスを排除して再現性を担保するため。

# Impact
- Win/WSL境界の不安定要因を排除\n- 監査再現性が向上

# Implementation
- sealing_commit指定でツリー列挙しハッシュ算出\n- 既存検証手順を更新

# Revalidation
CI連動で同一算出が成立することを継続検証し、差分が出た場合はINCIDENTとして記録する。
